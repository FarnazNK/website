<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Enterprise-level quantitative investment platform by Farnaz Nasehi">
  <title>Quantitative Investment Platform - Farnaz Nasehi</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Error Boundary -->
  <div id="error-boundary" class="error-boundary" style="display: none;">
    <div class="container mt-5">
      <div class="alert alert-danger">
        <h4><i class="fas fa-exclamation-triangle mr-2"></i>Application Error</h4>
        <p>Something went wrong. The application will attempt to recover automatically.</p>
        <button class="btn btn-primary" onclick="window.location.reload()">
          <i class="fas fa-sync-alt mr-2"></i>Reload Application
        </button>
      </div>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand font-weight-bold" href="index.html">Farnaz Nasehi</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
          <li class="nav-item"><a class="nav-link" href="resume.html">Experience</a></li>
          <li class="nav-item"><a class="nav-link" href="skills.html">Skills</a></li>
          <li class="nav-item active">
            <a class="nav-link" href="portfolio.html">Quantitative Investment Platform</a>
          </li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Particles background -->
  <div id="particles-js" class="particles-container"></div>

  <!-- Header Section -->
  <section class="header-section text-light py-4">
    <div class="container mt-5">
      <div class="card bg-dark text-white shadow-lg border-0 platform-header">
        <div class="card-body text-center p-4">
          <h1 class="card-title mb-3">
            <i class="fas fa-rocket mr-3"></i>Enterprise Quantitative Investment Platform
          </h1>
          <p class="card-text lead">
            Full-featured platform for financial data analysis, portfolio optimization, 
            trading strategy backtesting, and AI-powered insights
          </p>
          <div class="platform-status mt-3">
            <span class="badge badge-success mr-2">
              <i class="fas fa-database mr-1"></i>Data: Ready
            </span>
            <span class="badge badge-info mr-2">
              <i class="fas fa-calculator mr-1"></i>Analytics: Ready
            </span>
            <span class="badge badge-warning">
              <i class="fas fa-brain mr-1"></i>AI: Standby
            </span>
          </div>
        </div>
      </div>
      
      <!-- Toolbar -->
      <div class="toolbar-container mt-4">
        <div class="bg-dark py-3 px-4 rounded shadow-lg">
          <div class="toolbar-buttons d-flex flex-wrap justify-content-center">
            <button class="btn btn-tool active" data-module="dataManager">
              <i class="fas fa-database mr-2"></i>Data Management
            </button>
            <button class="btn btn-tool" data-module="plotManager" disabled>
              <i class="fas fa-chart-bar mr-2"></i>Visualizations
            </button>
            <button class="btn btn-tool" data-module="riskAnalytics" disabled>
              <i class="fas fa-calculator mr-2"></i>Risk Analytics
            </button>
            <button class="btn btn-tool" data-module="portfolioManager" disabled>
              <i class="fas fa-briefcase mr-2"></i>Portfolio Optimization
            </button>
            <button class="btn btn-tool" data-module="strategyBacktest" disabled>
              <i class="fas fa-chart-line mr-2"></i>Strategy Backtesting
            </button>
            <button class="btn btn-tool" data-module="aiInsights" disabled>
              <i class="fas fa-brain mr-2"></i>AI Insights
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Content Section -->
  <section class="content-section py-4">
    <div class="container">
      <div class="content-container bg-dark text-light p-4 rounded shadow-lg" id="moduleContainer">
        
        <!-- Data Manager Module -->
        <div class="module-content" id="dataManagerModule">
          <div class="welcome-screen" id="welcomeScreen">
            <h4 class="mb-4 text-center">
              <i class="fas fa-upload mr-2"></i>Data Import Center
            </h4>
            <p class="mb-4 text-center">Choose your data source to begin analysis</p>
            
            <!-- Data Source Tabs -->
            <ul class="nav nav-tabs justify-content-center mb-4" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#localUpload">
                  <i class="fas fa-laptop mr-1"></i> Local File
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#cloudStorage">
                  <i class="fas fa-cloud mr-1"></i> Cloud Storage
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#databaseConnect">
                  <i class="fas fa-database mr-1"></i> Database
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#apiConnect">
                  <i class="fas fa-plug mr-1"></i> API
                </a>
              </li>
            </ul>

            <div class="tab-content">
              <!-- Local File Upload -->
              <div class="tab-pane fade show active" id="localUpload">
                <div class="upload-zone p-5 mb-4 mx-auto" id="uploadZone">
                  <i class="fas fa-file-upload fa-3x mb-3"></i>
                  <p>Drag and drop files here<br>or</p>
                  <button class="btn btn-primary btn-lg mt-2" id="browseFiles">
                    <i class="fas fa-folder-open mr-2"></i>Browse Files
                  </button>
                  <input type="file" id="fileInput" accept=".csv,.xlsx,.xls,.json" style="display: none;">
                </div>
                <p class="small text-muted text-center">
                  <i class="fas fa-info-circle mr-1"></i>
                  Supported: CSV, Excel, JSON | Max: 50MB
                </p>
              </div>

              <!-- Cloud Storage -->
              <div class="tab-pane fade" id="cloudStorage">
                <div class="row">
                  <div class="col-lg-4 col-md-6 mb-3">
                    <div class="card bg-secondary h-100">
                      <div class="card-body">
                        <h6><i class="fab fa-microsoft text-info mr-2"></i>Azure Blob</h6>
                        <form id="azureForm">
                          <input type="text" class="form-control form-control-sm mb-2" id="azureAccount" placeholder="Account Name">
                          <input type="text" class="form-control form-control-sm mb-2" id="azureContainer" placeholder="Container">
                          <input type="text" class="form-control form-control-sm mb-2" id="azureBlob" placeholder="Blob Name">
                          <input type="text" class="form-control form-control-sm mb-2" id="azureSAS" placeholder="SAS Token">
                          <button type="submit" class="btn btn-info btn-sm btn-block">
                            <i class="fas fa-download mr-1"></i>Connect
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 mb-3">
                    <div class="card bg-secondary h-100">
                      <div class="card-body">
                        <h6><i class="fab fa-aws text-warning mr-2"></i>AWS S3</h6>
                        <form id="s3Form">
                          <input type="text" class="form-control form-control-sm mb-2" id="s3Bucket" placeholder="Bucket Name">
                          <input type="text" class="form-control form-control-sm mb-2" id="s3Key" placeholder="Object Key">
                          <input type="text" class="form-control form-control-sm mb-2" id="s3PresignedUrl" placeholder="Pre-signed URL">
                          <button type="submit" class="btn btn-warning btn-sm btn-block">
                            <i class="fas fa-download mr-1"></i>Connect
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 mb-3">
                    <div class="card bg-secondary h-100">
                      <div class="card-body">
                        <h6><i class="fab fa-google text-success mr-2"></i>Google Sheets</h6>
                        <form id="googleSheetsForm">
                          <input type="text" class="form-control form-control-sm mb-2" id="gSheetId" placeholder="Sheet ID">
                          <input type="text" class="form-control form-control-sm mb-2" id="gApiKey" placeholder="API Key">
                          <input type="text" class="form-control form-control-sm mb-2" id="gRange" placeholder="Range" value="A:Z">
                          <button type="submit" class="btn btn-success btn-sm btn-block">
                            <i class="fas fa-download mr-1"></i>Connect
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Database -->
              <div class="tab-pane fade" id="databaseConnect">
                <div class="alert alert-warning">
                  <i class="fas fa-exclamation-triangle mr-2"></i>
                  <strong>Note:</strong> Direct database connections require a backend API for security.
                </div>
                <div class="card bg-secondary">
                  <div class="card-body">
                    <h6><i class="fas fa-server mr-2"></i>Database API Endpoint</h6>
                    <form id="databaseForm">
                      <div class="form-group">
                        <label>Database Type</label>
                        <select class="form-control" id="dbType">
                          <option value="postgresql">PostgreSQL</option>
                          <option value="mysql">MySQL</option>
                          <option value="mongodb">MongoDB</option>
                          <option value="mssql">SQL Server</option>
                          <option value="oracle">Oracle</option>
                          <option value="dynamodb">DynamoDB</option>
                          <option value="cosmosdb">Cosmos DB</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>API Endpoint URL</label>
                        <input type="url" class="form-control" id="dbApiUrl" placeholder="https://your-api.com/data">
                      </div>
                      <div class="form-group">
                        <label>Query/Collection</label>
                        <input type="text" class="form-control" id="dbQuery" placeholder="SELECT * FROM table">
                      </div>
                      <div class="form-group">
                        <label>Authorization (Optional)</label>
                        <input type="text" class="form-control" id="dbAuth" placeholder="Bearer token...">
                      </div>
                      <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-database mr-2"></i>Execute Query
                      </button>
                    </form>
                  </div>
                </div>
              </div>

              <!-- API -->
              <div class="tab-pane fade" id="apiConnect">
                <div class="card bg-secondary">
                  <div class="card-body">
                    <h6><i class="fas fa-plug mr-2"></i>REST API Connection</h6>
                    <form id="apiForm">
                      <div class="form-group">
                        <label>API Endpoint URL</label>
                        <input type="url" class="form-control" id="apiUrl" placeholder="https://api.example.com/data" required>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Method</label>
                            <select class="form-control" id="apiMethod">
                              <option value="GET">GET</option>
                              <option value="POST">POST</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="form-group">
                            <label>Content Type</label>
                            <select class="form-control" id="apiContentType">
                              <option value="application/json">JSON</option>
                              <option value="text/csv">CSV</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                        <label>Headers (JSON)</label>
                        <textarea class="form-control" id="apiHeaders" rows="2" placeholder='{"Authorization": "Bearer token"}'></textarea>
                      </div>
                      <div class="form-group" id="apiBodyGroup" style="display: none;">
                        <label>Request Body (JSON)</label>
                        <textarea class="form-control" id="apiBody" rows="2" placeholder='{"key": "value"}'></textarea>
                      </div>
                      <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane mr-2"></i>Send Request
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!-- Loading -->
            <div class="text-center mt-4" id="uploadLoading" style="display: none;">
              <div class="spinner-border text-primary"></div>
              <p class="mt-2">Processing your data...</p>
            </div>
          </div>

          <!-- Data Preview -->
          <div class="data-preview-section" id="dataPreview" style="display: none;">
            <div class="row">
              <div class="col-md-8">
                <h5><i class="fas fa-table mr-2"></i>Data Preview</h5>
                <div class="table-container" id="dataTable"></div>
              </div>
              <div class="col-md-4">
                <h5><i class="fas fa-info-circle mr-2"></i>Dataset Information</h5>
                <div class="dataset-info" id="datasetInfo"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Insights Module -->
        <div class="module-content" id="aiInsightsModule" style="display: none;">
          <h4><i class="fas fa-brain mr-2"></i>AI-Powered Insights</h4>
          <div class="ai-controls mb-4">
            <div class="row">
              <div class="col-md-8">
                <label>Ask AI about your data or portfolio:</label>
                <textarea class="form-control" id="aiQuery" rows="3" 
                  placeholder="E.g., 'Analyze the risk profile of my portfolio'"></textarea>
              </div>
              <div class="col-md-4">
                <label>Analysis Type:</label>
                <select class="form-control" id="analysisType">
                  <option value="general">General Analysis</option>
                  <option value="risk">Risk Assessment</option>
                  <option value="portfolio">Portfolio Review</option>
                  <option value="market">Market Insights</option>
                </select>
                <button class="btn btn-primary mt-2 w-100" id="analyzeBtn">
                  <i class="fas fa-magic mr-2"></i>Analyze with AI
                </button>
              </div>
            </div>
          </div>
          <div class="ai-insights-container" id="aiInsightsContainer">
            <div class="insights-placeholder text-center py-5 text-muted">
              <i class="fas fa-robot fa-3x mb-3"></i>
              <p>AI insights will appear here after analysis</p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-dark text-center text-light py-3">
    <div class="container">
      <p class="mb-2">© 2025 Farnaz Nasehi. All rights reserved.</p>
      <div class="social-links mt-2">
        <a href="https://linkedin.com/in/farnaz-nasehi" class="social-link" target="_blank">
          <i class="fab fa-linkedin-in"></i>
        </a>
        <a href="https://github.com/FarnazNK" class="social-link" target="_blank">
          <i class="fab fa-github"></i>
        </a>
        <a href="mailto:fnasehikalajahi@gmail.com" class="social-link">
          <i class="far fa-envelope"></i>
        </a>
      </div>
    </div>
  </footer>

  <!-- Load libraries FIRST without defer -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  
  <!-- Load app.js LAST with defer -->
  <script defer src="app.js"></script>
  
  <!-- Particles Config -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof particlesJS !== 'undefined') {
        particlesJS("particles-js", {
          particles: {
            number: { value: 80, density: { enable: true, value_area: 800 } },
            color: { value: ["#007bff", "#6610f2", "#6f42c1"] },
            shape: { type: "circle" },
            opacity: { value: 0.5, random: true },
            size: { value: 3, random: true },
            line_linked: { enable: true, distance: 150, color: "#6dcfe7", opacity: 0.4, width: 1 },
            move: { enable: true, speed: 2, direction: "none", random: true }
          },
          interactivity: {
            detect_on: "canvas",
            events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" } },
            modes: { grab: { distance: 140 }, push: { particles_nb: 4 } }
          },
          retina_detect: true
        });
      }
    });
  </script>
</body>
</html>
